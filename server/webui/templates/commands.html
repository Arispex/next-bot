<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NextBot Command Config</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/antd@5/dist/reset.css" />
  <script src="/webui/static/js/theme-init.js"></script>
  <style>
    :root {
      --bg-layout: #f5f7fa;
      --surface: #ffffff;
      --surface-soft: #fafafa;
      --text: #1f1f1f;
      --text-muted: #8c8c8c;
      --line: #f0f0f0;
      --line-strong: #d9d9d9;
      --primary: #1677ff;
      --primary-soft: #e6f4ff;
      --success: #52c41a;
      --danger: #ff4d4f;
      --shadow: 0 1px 2px rgba(5, 5, 5, 0.06), 0 6px 16px rgba(5, 5, 5, 0.08);
    }

    html.dark {
      --bg-layout: #0f1115;
      --surface: #171a21;
      --surface-soft: #1c212c;
      --text: #f0f0f0;
      --text-muted: #a6a6a6;
      --line: #2f343f;
      --line-strong: #3c4452;
      --primary: #4096ff;
      --primary-soft: rgba(22, 119, 255, 0.18);
      --success: #95de64;
      --danger: #ff7875;
      --shadow: 0 8px 24px rgba(0, 0, 0, 0.35);
    }

    * {
      box-sizing: border-box;
    }

    html,
    body {
      margin: 0;
      min-height: 100%;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
      color: var(--text);
      background: var(--bg-layout);
    }

    .page {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .header {
      height: 64px;
      border-bottom: 1px solid var(--line);
      background: var(--surface);
      display: flex;
      align-items: center;
      padding: 0 16px;
      gap: 10px;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .header-title {
      margin: 0;
      font-size: 18px;
      font-weight: 600;
    }

    .header-desc {
      margin: 0;
      font-size: 12px;
      color: var(--text-muted);
    }

    .header-actions {
      margin-left: auto;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .btn {
      height: 36px;
      border-radius: 8px;
      border: 1px solid var(--line-strong);
      background: var(--surface);
      color: var(--text);
      padding: 0 12px;
      font-size: 13px;
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      cursor: pointer;
      transition: all 0.2s ease;
      text-decoration: none;
    }

    .btn:hover {
      color: var(--primary);
      border-color: var(--primary);
    }

    .btn-icon {
      width: 40px;
      height: 40px;
      padding: 0;
    }

    .btn-icon svg {
      width: 18px;
      height: 18px;
    }

    .btn-primary {
      background: var(--primary);
      border-color: var(--primary);
      color: #ffffff;
    }

    .btn-primary:hover {
      color: #ffffff;
      filter: brightness(1.06);
      border-color: var(--primary);
    }

    .theme-icon-sun {
      display: none;
    }

    html.dark .theme-icon-sun {
      display: block;
    }

    html.dark .theme-icon-moon {
      display: none;
    }

    .content {
      padding: 16px;
    }

    .toolbar {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 10px;
      margin-bottom: 14px;
    }

    .tip {
      font-size: 13px;
      color: var(--text-muted);
    }

    .status {
      font-size: 13px;
      color: var(--text-muted);
      min-height: 20px;
    }

    .status.error {
      color: var(--danger);
    }

    .status.success {
      color: var(--success);
    }

    .group {
      margin-bottom: 16px;
      border: 1px solid var(--line);
      border-radius: 12px;
      background: var(--surface);
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    .group-head {
      padding: 12px 14px;
      border-bottom: 1px solid var(--line);
      background: var(--surface-soft);
      font-size: 13px;
      color: var(--text-muted);
      font-weight: 600;
    }

    .command-item {
      padding: 14px;
      border-bottom: 1px solid var(--line);
    }

    .command-item:last-child {
      border-bottom: none;
    }

    .command-head {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .command-name {
      font-size: 15px;
      font-weight: 600;
    }

    .command-key {
      font-size: 12px;
      color: var(--text-muted);
    }

    .command-perm {
      margin-top: 4px;
      font-size: 12px;
      color: var(--text-muted);
    }

    .switch {
      margin-left: auto;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 12px;
      color: var(--text-muted);
    }

    .params {
      margin-top: 12px;
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
    }

    .param {
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 10px;
      background: var(--surface-soft);
    }

    .param-label {
      margin: 0 0 6px;
      font-size: 12px;
      font-weight: 600;
      color: var(--text);
    }

    .param-desc {
      margin: 0 0 8px;
      font-size: 12px;
      color: var(--text-muted);
    }

    .input,
    .select {
      width: 100%;
      height: 34px;
      border: 1px solid var(--line-strong);
      border-radius: 8px;
      background: var(--surface);
      color: var(--text);
      padding: 0 10px;
      font-size: 13px;
    }

    .input:focus,
    .select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 2px color-mix(in srgb, var(--primary) 20%, transparent);
    }

    .empty {
      border: 1px dashed var(--line-strong);
      border-radius: 12px;
      padding: 24px;
      text-align: center;
      color: var(--text-muted);
      background: var(--surface);
    }

    .hidden {
      display: none !important;
    }

    @media (max-width: 900px) {
      .params {
        grid-template-columns: 1fr;
      }

      .header {
        height: auto;
        min-height: 64px;
        padding: 10px 12px;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <header class="header">
      <a href="/webui" class="btn" aria-label="返回控制台">返回控制台</a>
      <div>
        <h1 class="header-title">命令配置中心</h1>
        <p class="header-desc">统一管理命令开关和参数，保存后即时生效</p>
      </div>
      <div class="header-actions">
        <a
          href="https://github.com/Arispex/next-bot"
          target="_blank"
          rel="noopener noreferrer"
          class="btn btn-icon"
          aria-label="打开 GitHub 仓库"
          title="GitHub"
        >
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M12 .5a11.5 11.5 0 0 0-3.64 22.41c.57.1.78-.24.78-.55v-2.1c-3.18.69-3.85-1.52-3.85-1.52-.52-1.3-1.27-1.64-1.27-1.64-1.05-.71.08-.69.08-.69 1.16.08 1.77 1.17 1.77 1.17 1.03 1.74 2.7 1.24 3.35.95.11-.74.4-1.24.73-1.53-2.54-.28-5.21-1.25-5.21-5.57 0-1.23.45-2.24 1.18-3.03-.12-.29-.51-1.44.11-3 0 0 .96-.3 3.15 1.16a11.1 11.1 0 0 1 5.74 0c2.19-1.46 3.14-1.16 3.14-1.16.63 1.56.24 2.71.12 3 .73.79 1.18 1.8 1.18 3.03 0 4.33-2.68 5.29-5.23 5.57.41.35.78 1.03.78 2.08v3.08c0 .31.2.66.79.55A11.5 11.5 0 0 0 12 .5Z"></path>
          </svg>
        </a>

        <button id="theme-toggle" type="button" class="btn btn-icon" aria-label="切换到深色主题">
          <svg class="theme-icon-sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="4"></circle>
            <path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41"></path>
          </svg>
          <svg class="theme-icon-moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12.79A9 9 0 1 1 11.21 3c0 .38.02.76.07 1.13A7 7 0 0 0 19.87 12c.37.05.75.07 1.13.07z"></path>
          </svg>
        </button>

        <form method="post" action="/webui/logout">
          <button type="submit" class="btn btn-icon" aria-label="退出登入" title="退出登入">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
              <polyline points="16 17 21 12 16 7"></polyline>
              <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
          </button>
        </form>
      </div>
    </header>

    <main class="content">
      <div class="toolbar">
        <button id="reload-btn" type="button" class="btn">刷新</button>
        <button id="save-all-btn" type="button" class="btn btn-primary">保存全部</button>
        <span class="tip">保存会批量提交所有已修改命令，并立即生效。</span>
      </div>

      <div id="status" class="status"></div>
      <div id="loading" class="empty">加载中...</div>
      <div id="empty" class="empty hidden">暂无可配置命令。</div>
      <div id="groups"></div>
    </main>
  </div>

  <script src="/webui/static/js/commands.js"></script>
</body>
</html>
